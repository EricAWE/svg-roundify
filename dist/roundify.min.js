!function(){"use strict";function n(){function n(n,t){var i=t.append('<svg class="svg-round"></svg>').children();i.roundify(n.config.data,n.config.options)}var t={link:n,restrict:"E",scope:{config:"=",svgId:"=svgId"}};return t}angular.module("svgRoundify",[]).directive("svgRoundify",n),n.$inject=["$filter","$document"]}(),function(n){var t=function(n,t,i,o,e,a,s){function r(n,t,i,o){var e=(o-90)*Math.PI/180;return{x:n+i*Math.cos(e),y:t+i*Math.sin(e)}}function c(n,t,i,o,e){var a=r(n,t,i,e),s=r(n,t,i,o),c=180>=e-o?"0":"1",f=["M",a.x,a.y,"A",i,i,0,c,0,s.x,s.y].join(" ");return f}var f=this,g=e;this.endPoint=0,this.init=function(){var e=n.color||i,a=n.percent,s=a/100*360,r=5;f.from=c(o.pos.x,o.pos.y,o.radius,t+r,t+r),f.path=c(o.pos.x,o.pos.y,o.radius,t+r,t+s-r),f.loopLength=Snap.path.getTotalLength(f.path),f.endPoint=t+s,f.draw=g.path({stroke:e,fillOpacity:0,strokeWidth:0,strokeLinecap:"round"})},this.getEndPoint=function(){return f.endPoint},this.init()};n.Arc=t}(window),function(n){var t=function(n){var t=this,i=n;this.init=function(n,i){this.configs=i,this.data=n;var o=this.constructLegend(n,t.configs.colors);return o.attr({transform:"translate(0, -"+(o.getBBox().height/2-10)+")"}).animate({opacity:1},600),o},this.constructLegend=function(n,o){var e=i.g().attr({opacity:0}),a=t.configs.pos.x,s=t.configs.pos.y;return n.forEach(function(n,r){var c=n.color||o[r],f=i.circle(a,s-5,5).attr({fill:c}),g=i.text(a+20,s,n.name).attr({fontFamily:t.configs.font.fontFamily,fontSize:t.configs.font.fontSize,fill:t.configs.font.fill}),u=i.text(a+200,s,n.value.toString()).attr({fontFamily:t.configs.font.fontFamily,fontSize:t.configs.font.fontSize,fill:t.configs.font.fill,fontWeight:"700",textAnchor:"end"});e.add(i.g(f,g,u)),s+=2*parseInt(t.configs.font.fontSize,10)}),e}};n.Legend=t}(window),function(n){var t=function(n,t,i){};n.MainData=t}(window),function(n){"use strict";var t=function(n,t,i){function o(){var n=s.arcs;Snap.animate(0,n[r].loopLength,function(t){n[r].draw.attr({path:Snap.path.getSubpath(n[r].path,0,t),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut,function(){r>0&&(r--,s.animate())})}function e(){var n=s.arcs;n.forEach(function(n){Snap.animate(0,n.loopLength,function(t){n.draw.attr({path:Snap.path.getSubpath(n.path,0,t),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut)})}function a(){var n=s.arcs;n.forEach(function(n){n.draw.attr({path:Snap.path.getSubpath(n.path,0,n.loopLength),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})})}var s=this,r=0,c=n;this.arcs=[],this.configs={},this.init=function(o,e){this.configs=e;var a=c.g(),f=this.convertToPercent(o),g=0;return f.forEach(function(o,e){o.percent>2&&(s.arcs.push(new Arc(o,s.configs.nowPoint,s.configs.colors[e],s.configs,n,t,i)),s.configs.nowPoint=s.arcs[g].getEndPoint(),a.add(s.arcs[g].draw),g++)}),r=s.arcs.length-1,setTimeout(function(){s.animate()},200),a},this.convertToPercent=function(n){var t=_.sum(n,function(n){return n.value});return n.forEach(function(i,o){n[o].percent=100*i.value/t}),n},this.animate=function(){switch(s.configs.animation.type){case"smooth":o();break;case"parallel":e();break;default:a()}}};n.RoundifyCircle=t}(window),function(){"use strict";var n=function(n,t,i){function o(){var n=0;return n=s>=r?r/2-2*g.configs.padding:s/2-2*g.configs.padding}function e(n){var t;switch(n){case"right":t={circle:{x:g.configs.padding+g.configs.legend.radius,y:0},legend:{x:2*g.configs.legend.radius+50,y:f}};break;case"bottom":t={circle:{x:c,y:g.configs.padding+g.configs.legend.radius},legend:{x:c,y:g.configs.padding+2*g.configs.legend.radius}};break;default:t={x:c,y:f}}return t}var a=Snap(n[0]),s=i.width||n.prop("offsetWidth"),r=i.height||n.prop("offsetHeight"),c=s/2,f=r/2,g=this;this.configs={},this.round=new RoundifyCircle(a,c,f),this.legend=new Legend(a,c,f),this.mainData=new MainData(a,c,f),this["default"]={padding:20,circle:{pos:"center",nowPoint:0,stroke:8,colors:["#3498db","#1abc9c","#9b59b6"],animation:{type:"parallel"}},legend:{pos:"right",colors:["#3498db","#1abc9c","#9b59b6"],font:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fill:"#575757"}},mainData:{value:"32%"}},this.init=function(){this.configs=i?this.extend(this["default"],i):this["default"],this.configs.circle.radius=o(),this.configs.legend.radius=this.configs.circle.radius,c=(g.configs.width||s)/2,f=(g.configs.height||r)/2;var n=e(g.configs.legend.pos||!1),u=a.g();this.configs.circle.pos=n.circle,this.configs.legend.pos=n.legend;var d=this.round.init(t,g.configs.circle),h=this.legend.init(t,g.configs.legend);u.append(d),u.append(h)},this.extend=function(n){for(var t=n||{},i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var e in o)o.hasOwnProperty(e)&&("object"==typeof o[e]?g.extend(t[e],o[e]):t[e]=o[e])}return t},this.init()},t=angular.element;t.prototype.roundify=function(t,i){return this.round=new n(this,t,i),this}}();