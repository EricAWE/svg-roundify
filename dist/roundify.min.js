!function(){"use strict";function n(){function n(n,t){var i=t.append('<svg class="svg-round"></svg>').children();i.roundify(n.config.data,n.config.options)}var t={link:n,restrict:"E",scope:{config:"=",svgId:"=svgId"}};return t}angular.module("svgRoundify",[]).directive("svgRoundify",n),n.$inject=["$filter","$document"]}(),function(n){var t=function(n,t,i,o,e,a,s){function r(n,t,i,o){var e=(o-90)*Math.PI/180;return{x:n+i*Math.cos(e),y:t+i*Math.sin(e)}}function c(n,t,i,o,e){var a=r(n,t,i,e),s=r(n,t,i,o),c=180>=e-o?"0":"1",f=["M",a.x,a.y,"A",i,i,0,c,0,s.x,s.y].join(" ");return f}var f=this,g=e;this.endPoint=0,this.init=function(){var e=n.color||i,a=n.percent,s=a/100*360,r=5;f.from=c(o.pos.x,o.pos.y,o.radius,t+r,t+r),f.path=c(o.pos.x,o.pos.y,o.radius,t+r,t+s-r),f.loopLength=Snap.path.getTotalLength(f.path),f.endPoint=t+s,f.draw=g.path({stroke:e,fillOpacity:0,strokeWidth:0,strokeLinecap:"round"})},this.getEndPoint=function(){return f.endPoint},this.init()};n.Arc=t}(window),function(n){var t=function(n,t,i){var o=this,e=n;this.init=function(n,t){this.configs=t,this.data=n;var i=this.constructLegend(n,o.configs.colors);return i.attr({transform:"translate(0, -"+(i.getBBox().height/2-10)+")"}).animate({opacity:1},600),i},this.constructLegend=function(n,t){var i=e.g().attr({opacity:0}),a=o.configs.pos.x,s=o.configs.pos.y;return n.forEach(function(n,r){var c=n.color||t[r],f=e.circle(a,s-5,5).attr({fill:c}),g=e.text(a+20,s,n.name).attr({fontFamily:o.configs.font.fontFamily,fontSize:o.configs.font.fontSize,fill:o.configs.font.fill}),u=e.text(a+200,s,n.value).attr({fontFamily:o.configs.font.fontFamily,fontSize:o.configs.font.fontSize,fill:o.configs.font.fill,fontWeight:"700",textAnchor:"end"});i.add(e.g(f,g,u)),s+=2*parseInt(o.configs.font.fontSize,10)}),i}};n.Legend=t}(window),function(n){var t=function(n,t,i){};n.MainData=t}(window),function(n){"use strict";var t=function(n,t,i){function o(){var n=s.arcs;Snap.animate(0,n[r].loopLength,function(t){n[r].draw.attr({path:Snap.path.getSubpath(n[r].path,0,t),transform:"translate("+2*s.configs.pos.x+"), scale(-1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut,function(){r>0&&(r--,s.animate())})}function e(){var n=s.arcs;n.forEach(function(n){Snap.animate(0,n.loopLength,function(t){n.draw.attr({path:Snap.path.getSubpath(n.path,0,t),transform:"translate("+2*s.configs.pos.x+" "+(s.configs.radius+40)+") scale(-1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut)})}function a(){var n=s.arcs;n.forEach(function(n){n.draw.attr({path:Snap.path.getSubpath(n.path,0,n.loopLength),transform:"translate("+2*s.configs.pos.x+"), scale(-1, 1)",strokeWidth:s.configs.stroke})})}var s=this,r=0,c=n;this.arcs=[],this.configs={},this.init=function(o,e){this.configs=e;var a=c.g(),f=this.convertToPercent(o);return f.forEach(function(o,e){s.arcs.push(new Arc(o,s.configs.nowPoint,s.configs.colors[e],s.configs,n,t,i)),s.configs.nowPoint=s.arcs[e].getEndPoint(),a.add(s.arcs[e].draw)}),r=s.arcs.length-1,setTimeout(function(){s.animate()},200),a},this.convertToPercent=function(n){var t=_.sum(n,function(n){return n.value});return n.forEach(function(i,o){n[o].percent=100*i.value/t}),n},this.animate=function(){switch(s.configs.animation.type){case"smooth":o();break;case"parallel":e();break;default:a()}}};n.RoundifyCircle=t}(window),function(){"use strict";var n=function(n,t,i){function o(){var n=0;return n=r>=c?c/2-2*u.configs.padding:r/2-2*u.configs.padding}function e(n){var t;switch(n){case"right":t={circle:{x:u.configs.padding+u.configs.legend.radius,y:0},legend:{x:2*u.configs.legend.radius+50,y:g}};break;case"bottom":t={circle:{x:f,y:u.configs.padding+u.configs.legend.radius},legend:{x:f,y:u.configs.padding+2*u.configs.legend.radius}};break;default:t={x:f,y:g}}return t}var a=n.attr("class"),s=Snap("."+a),r=i.width||document.querySelectorAll("."+a)[0].clientWidth,c=i.height||document.querySelectorAll("."+a)[0].clientHeight,f=r/2,g=c/2,u=this;this.configs={},this.round=new RoundifyCircle(s,f,g),this.legend=new Legend(s,f,g),this.mainData=new MainData(s,f,g),this["default"]={padding:20,circle:{pos:"center",nowPoint:0,stroke:8,colors:["#3498db","#1abc9c","#9b59b6"],animation:{type:"parallel"}},legend:{pos:"right",colors:["#3498db","#1abc9c","#9b59b6"],font:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fill:"#575757"}},mainData:{value:"32%"}},this.init=function(){this.configs=i?this.extend(this["default"],i):this["default"],this.configs.circle.radius=o(),this.configs.legend.radius=this.configs.circle.radius,f=(u.configs.width||r)/2,g=(u.configs.height||c)/2;var n=e(u.configs.legend.pos||!1),a=s.g();this.configs.circle.pos=n.circle,this.configs.legend.pos=n.legend;var d=this.round.init(t,u.configs.circle),l=this.legend.init(t,u.configs.legend);a.append(d),a.append(l)},this.extend=function(n){for(var t=n||{},i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var e in o)o.hasOwnProperty(e)&&("object"==typeof o[e]?u.extend(t[e],o[e]):t[e]=o[e])}return t},this.init()},t=angular.element;t.prototype.roundify=function(t,i){return this.round=new n(this,t,i),this}}();