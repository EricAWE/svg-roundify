!function(){"use strict";function n(){function n(n,t){var i=t.append('<svg class="svg-round"></svg>').children();i.roundify(n.config.data,n.config.options)}var t={link:n,restrict:"E",scope:{config:"=",svgId:"=svgId"}};return t}angular.module("svgRoundify",[]).directive("svgRoundify",n),n.$inject=["$filter","$document"]}(),function(n){var t=function(n,t,i,o,a,e,s){function r(n,t,i,o){var a=(o-90)*Math.PI/180;return{x:n+i*Math.cos(a),y:t+i*Math.sin(a)}}function c(n,t,i,o,a){var e=r(n,t,i,a),s=r(n,t,i,o),c=180>=a-o?"0":"1",f=["M",e.x,e.y,"A",i,i,0,c,0,s.x,s.y].join(" ");return f}var f=this,g=a;this.endPoint=0,this.init=function(){var a=n.color||i,e=n.percent,s=e/100*360,r=5;f.from=c(o.pos.x,o.pos.y,o.radius,t+r,t+r),f.path=c(o.pos.x,o.pos.y,o.radius,t+r,t+s-r),f.loopLength=Snap.path.getTotalLength(f.path),f.endPoint=t+s,f.draw=g.path({stroke:a,fillOpacity:0,strokeWidth:0,strokeLinecap:"round"})},this.getEndPoint=function(){return f.endPoint},this.init()};n.Arc=t}(window),function(n){var t=function(n,t,i){var o=this,a=n;this.init=function(n,t){this.configs=t,this.data=n;var i=this.constructLegend(n,o.configs.colors);return i.attr({transform:"translate(0, -"+(i.getBBox().height/2-10)+")"}).animate({opacity:1},600),i},this.constructLegend=function(n,t){var i=a.g().attr({opacity:0}),e=o.configs.pos.x,s=o.configs.pos.y;return n.forEach(function(n,r){var c=n.color||t[r],f=a.circle(e,s-5,5).attr({fill:c}),g=a.text(e+20,s,n.name).attr({fontFamily:o.configs.font.fontFamily,fontSize:o.configs.font.fontSize,fill:o.configs.font.fill}),u=a.text(e+200,s,n.value).attr({fontFamily:o.configs.font.fontFamily,fontSize:o.configs.font.fontSize,fill:o.configs.font.fill,fontWeight:"700",textAnchor:"end"});i.add(a.g(f,g,u)),s+=2*parseInt(o.configs.font.fontSize,10)}),i}};n.Legend=t}(window),function(n){var t=function(n,t,i){};n.MainData=t}(window),function(n){"use strict";var t=function(n,t,i){function o(){var n=s.arcs;Snap.animate(0,n[r].loopLength,function(t){n[r].draw.attr({path:Snap.path.getSubpath(n[r].path,0,t),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut,function(){r>0&&(r--,s.animate())})}function a(){var n=s.arcs;n.forEach(function(n){Snap.animate(0,n.loopLength,function(t){n.draw.attr({path:Snap.path.getSubpath(n.path,0,t),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})},400,mina.easeInOut)})}function e(){var n=s.arcs;n.forEach(function(n){n.draw.attr({path:Snap.path.getSubpath(n.path,0,n.loopLength),transform:"translate(0 "+(s.configs.radius+40)+") scale(1, 1)",strokeWidth:s.configs.stroke})})}var s=this,r=0,c=n;this.arcs=[],this.configs={},this.init=function(o,a){this.configs=a;var e=c.g(),f=this.convertToPercent(o);return f.forEach(function(o,a){s.arcs.push(new Arc(o,s.configs.nowPoint,s.configs.colors[a],s.configs,n,t,i)),s.configs.nowPoint=s.arcs[a].getEndPoint(),e.add(s.arcs[a].draw)}),r=s.arcs.length-1,setTimeout(function(){s.animate()},200),e},this.convertToPercent=function(n){var t=_.sum(n,function(n){return n.value});return n.forEach(function(i,o){n[o].percent=100*i.value/t}),n},this.animate=function(){switch(s.configs.animation.type){case"smooth":o();break;case"parallel":a();break;default:e()}}};n.RoundifyCircle=t}(window),function(){"use strict";var n=function(n,t,i){function o(){var n=0;return n=s>=r?r/2-2*g.configs.padding:s/2-2*g.configs.padding}function a(n){var t;switch(n){case"right":t={circle:{x:g.configs.padding+g.configs.legend.radius,y:0},legend:{x:2*g.configs.legend.radius+50,y:f}};break;case"bottom":t={circle:{x:c,y:g.configs.padding+g.configs.legend.radius},legend:{x:c,y:g.configs.padding+2*g.configs.legend.radius}};break;default:t={x:c,y:f}}return t}var e=Snap(n[0]),s=i.width||n.prop("offsetWidth"),r=i.height||n.prop("offsetHeight"),c=s/2,f=r/2,g=this;this.configs={},this.round=new RoundifyCircle(e,c,f),this.legend=new Legend(e,c,f),this.mainData=new MainData(e,c,f),this["default"]={padding:20,circle:{pos:"center",nowPoint:0,stroke:8,colors:["#3498db","#1abc9c","#9b59b6"],animation:{type:"parallel"}},legend:{pos:"right",colors:["#3498db","#1abc9c","#9b59b6"],font:{fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',fontSize:"14px",fill:"#575757"}},mainData:{value:"32%"}},this.init=function(){this.configs=i?this.extend(this["default"],i):this["default"],this.configs.circle.radius=o(),this.configs.legend.radius=this.configs.circle.radius,c=(g.configs.width||s)/2,f=(g.configs.height||r)/2;var n=a(g.configs.legend.pos||!1),u=e.g();this.configs.circle.pos=n.circle,this.configs.legend.pos=n.legend;var d=this.round.init(t,g.configs.circle),h=this.legend.init(t,g.configs.legend);u.append(d),u.append(h)},this.extend=function(n){for(var t=n||{},i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var a in o)o.hasOwnProperty(a)&&("object"==typeof o[a]?g.extend(t[a],o[a]):t[a]=o[a])}return t},this.init()},t=angular.element;t.prototype.roundify=function(t,i){return this.round=new n(this,t,i),this}}();